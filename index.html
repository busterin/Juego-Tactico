<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>TACTIC HEROES</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <link rel="manifest" href="manifest.webmanifest">
  <!-- Asegúrate de que style.css existe y respeta --bg-url con .PNG -->
  <link rel="stylesheet" href="style.css?v=save-load-1">
</head>
<body>
  <!-- Bloqueo por orientación (el juego es horizontal) -->
  <div id="orientationBlocker" style="display:none">
    <div class="obx">
      <p>Gira el dispositivo para jugar en horizontal</p>
    </div>
  </div>

  <!-- Portada -->
  <div id="portada">
    <!-- La imagen de portada no debe bloquear clicks -->
    <img src="assets/Portada.PNG" alt="Portada Tactic Heroes" class="portada-img" />
    <div class="portada-actions">
      <!-- “Triple seguro”: ids + onclick de respaldo -->
      <button id="btnNuevaPartida" class="btn" onclick="TH_newGame && TH_newGame()">NUEVA PARTIDA</button>
      <button id="btnCargarPartida" class="btn secondary" onclick="TH_loadGame && TH_loadGame()">CARGAR PARTIDA</button>
    </div>
  </div>

  <!-- INTRO tipo Fire Emblem (pantalla completa) -->
  <div id="introScene" style="display:none">
    <img id="introImg" class="intro-bg" src="assets/Inicio1.PNG" alt="Introducción" />
    <div class="intro-box">
      <div id="introText" class="intro-text"></div>
      <div class="intro-cta">
        <button id="btnIntroNext" class="primary small">Continuar</button>
      </div>
    </div>
  </div>

  <!-- DIÁLOGO (Risko/Hans/Guardián) -->
  <div id="dialogScene" style="display:none">
    <!-- Fondo de diálogo: usa --bg-url (definido en CSS/script) -->
    <div class="dialog-bg"></div>

    <!-- Personajes -->
    <!-- Hans a la izquierda -->
    <img class="dialog-char left"  id="charArcher"   src="assets/ArqueroDialogo.PNG"   alt="Hans" />
    <!-- Risko a la derecha -->
    <img class="dialog-char right" id="charKnight"   src="assets/GuerreraDialogo.PNG"  alt="Risko" />
    <!-- Guardián (aparece en la escena de fortaleza) -->
    <img class="dialog-char left"  id="charGuardian" src="assets/GuardianDialogo.PNG"  alt="Guardián" style="display:none" />

    <!-- Caja de diálogo (siempre por encima) -->
    <div class="dialog-box">
      <div class="dialog-name" id="dialogName">Risko</div>
      <div class="dialog-text" id="dialogText"></div>
      <div class="dialog-cta">
        <button id="btnDialogNext" class="primary small">Continuar</button>
      </div>
    </div>
  </div>

  <!-- Overlay: ¡COMIENZA EL COMBATE! + audio tambor -->
  <div id="battleStartBanner">¡COMIENZA EL COMBATE!</div>
  <audio id="battleStartSound" src="assets/drum.mp3" preload="auto"></audio>

  <!-- Overlay: NIVEL COMPLETADO -->
  <div id="overlayWin" class="overlay" style="display:none">
    <div class="overlay-box">
      <h1>NIVEL COMPLETADO</h1>
      <button id="btnContinuar" class="primary">Continuar</button>
    </div>
  </div>

  <!-- Banner de turno -->
  <div id="turnBanner" class="turn-banner" style="display:none">TU TURNO</div>

  <!-- Tablero 16×9 + HUD fijo inferior (ficha + acciones) -->
  <div id="mapa" style="display:none">
    <div id="hud">
      <div id="ficha"></div>
      <div id="acciones"></div>
    </div>
  </div>

  <!-- Botón flotante Guardar (el script lo muestra/oculta) -->
  <button id="btnGuardar" style="display:none">Guardar</button>

  <!-- Overlay del tutorial -->
  <div id="tutorialOverlay" style="display:none">
    <div class="tut-box">
      <p id="tutText" class="tut-text"></p>
    </div>
  </div>

  <!-- JS principal -->
  <script src="script.js?v=save-load-1"></script>
</body>
</html>