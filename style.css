:root{
  --cell: 40px;
  --gap: 0px;
  --cols: 16;
  --rows: 9;
  --npRows: 2;
  --hudRows: 1.4;
  --hudOffset: 1.6;
  --bg-url: url("assets/background.PNG"); /* ⚠️ usa .PNG */
}

* { box-sizing: border-box; }
html, body { height: 100%; }
body {
  font-family: system-ui, Arial, sans-serif;
  margin: 0;
  height: 100dvh;
  min-height: -webkit-fill-available;
  color: #fff;
  overflow: hidden;
  display: flex;
  flex-direction: column;
  padding-bottom: env(safe-area-inset-bottom);
  background-image: var(--bg-url);
  background-size: cover;
  background-position: center;
  background-repeat: no-repeat;
  background-color: #000;
}

/* ---------- Portada ---------- */
#portada { position: fixed; inset: 0; background: #000; display: flex; justify-content: center; align-items: center; z-index: 10000; }
#portada .portada-img { width: 100%; height: 100%; object-fit: cover; object-position: center; pointer-events: none; }
#portada .btn-jugar { position: absolute; bottom: 10%; padding: 14px 26px; font-size: 20px; font-weight: bold; border-radius: 12px; border: 2px solid #145a32; background: linear-gradient(180deg, #27ae60, #1e8449); color: #fff; cursor: pointer; box-shadow: 0 4px 14px rgba(0,0,0,.4); }
#portada .btn-jugar:hover { background: linear-gradient(180deg, #2ecc71, #229954); }

/* ---------- Diálogo ---------- */
#dialogScene{ position: fixed; inset: 0; z-index: 12000; }
#dialogScene .dialog-bg{ position: absolute; inset: 0; background-image: var(--bg-url); background-size: cover; background-position: center; filter: brightness(.95) saturate(1.05); }
.dialog-char{ position: absolute; bottom: 10%; height: 72%; max-width: 36vw; object-fit: contain; image-rendering: pixelated; opacity: 0.6; transition: opacity .2s ease; pointer-events: none; }
.dialog-char.left { left: 3%; transform: translateX(-120%); animation: char-in-left .55s ease-out forwards; }
.dialog-char.right{ right: 3%; transform: translateX(120%) scaleX(-1); animation: char-in-right .65s ease-out forwards; animation-delay: .1s; }
@keyframes char-in-left { 0% { transform: translateX(-120%); opacity: 0; } 70% { transform: translateX(4%); opacity: 1; } 100% { transform: translateX(0); opacity: 1; } }
@keyframes char-in-right{ 0% { transform: translateX(120%) scaleX(-1); opacity: 0; } 70% { transform: translateX(-4%) scaleX(-1); opacity: 1; } 100% { transform: translateX(0) scaleX(-1); opacity: 1; } }
.dialog-char.speaking{ opacity: 1 !important; }
.dialog-box{ position: absolute; left: 6%; right: 6%; bottom: 4%; background: rgba(7,12,16,.88); border-radius: 12px; padding: 10px 12px; box-shadow: 0 10px 24px rgba(0,0,0,.35); }
.dialog-name{ font-weight: 800; margin-bottom: 6px; color: #fff; }
.dialog-text{ font-size: 14px; line-height: 1.35; color: #e6ecf4; min-height: 3.2em; margin-bottom: 10px; white-space: pre-wrap; }

/* ---------- Overlay ---------- */
.overlay{ position: fixed; inset: 0; z-index: 9999; display: grid; place-items: center; background: rgba(0,0,0,.55); backdrop-filter: blur(4px); }
.overlay::before{ content:""; position:absolute; inset:0; z-index:-1; background-image:var(--bg-url); background-size:cover; background-position:center; transform:scale(1.02); filter:brightness(0.9); }
.overlay-box{ background:#101418; border-radius:14px; padding:22px 20px; width:min(70vw,520px); text-align:center; }

/* ---------- Tablero ---------- */
#mapa{ flex:1; display:grid; grid-template-columns:repeat(var(--cols), var(--cell)); grid-template-rows:repeat(var(--rows), var(--cell)); gap:var(--gap); width:calc(var(--cols)*var(--cell)); height:calc(var(--rows)*var(--cell)); margin:auto; position:relative; }
.celda{ width:var(--cell); height:var(--cell); display:grid; place-items:center; }
.fichaMiniImg{ width:90%; height:90%; object-fit:contain; image-rendering:pixelated; }
